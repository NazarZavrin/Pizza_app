CREATE TABLE pizza(
  name VARCHAR(20) PRIMARY KEY NOT NULL,
  ingredients VARCHAR(100) NOT NULL,
  weight DECIMAL NOT NULL,
  price DECIMAL NOT NULL,
  is_vegetarian BOOLEAN DEFAULT false
)
INSERT INTO pizza VALUES
('Сирна', 'Сир пармезан, сир моцарела, томатний соус', 570, 155, true),
('Пепероні', 'Нарізані пепероні, сир моцарела, орегано, базилік', 610, 185, false),
('Маргарита', 'Нарізані помідори, сир моцарела, базилік', 590, 160, true),
('Гавайська', 'Шинка, шматочки ананаса, сир моцарела, орегано, томатний соус', 615, 185, false),
('Капричіоза', 'Шинка, оливки, нарізані гриби, артишоки, сир моцарела, орегано, томатний соус', 605, 175, false),
('М''ясна', 'Італійська ковбаса, яловичий фарш, бекон, шинка, нарізаний пепероні, сир моцарела, томатний соус', 625, 195, false),
('Кальцоне', 'Нарізані пепероні, шинка, нарізані гриби, оливки, сир пармезан, сир моцарела, томатний соус', 615, 185, false),
('Вегетаріанська', 'Оливки, нарізані гриби, нарізані помідори, сир моцарелла, артишоки, базилік, томатний соус', 610, 185, true);

SELECT name, weight, price FROM pizza;

CREATE TABLE extra_toppings (
  name VARCHAR(30) PRIMARY KEY NOT NULL,
  weight DECIMAL NOT NULL,
  price DECIMAL NOT NULL,
  is_vegetarian BOOLEAN DEFAULT false
)

INSERT INTO extra_toppings VALUES
('Італійська ковбаса', 80, 30, false),
('Яловичий фарш', 70, 15, false),
('Нарізана цибуля', 75, 20, true),
('Нарізані помідори', 90, 20, true),
('Нарізані гриби', 70, 25, true),
('Нарізані пепероні', 80, 30, false),
('Шинка', 75, 20, false),
('Сир пармезан', 60, 20, true),
('Сир моцарела', 60, 20, true);

CREATE TABLE customer (
  name VARCHAR(50) NOT NULL,
  phone_num BIGINT NOT NULL,
  email VARCHAR(50) NOT NULL,
  last_action_date_time TIMESTAMP NOT NULL DEFAULT NOW(),
  PRIMARY KEY (name, phone_num)
);

insert into customer values
('Kevin', 123456789012345, 'someEmail');

CREATE TABLE employee (
  name VARCHAR(50) PRIMARY KEY NOT NULL,
  phone_num BIGINT NOT NULL,
  email VARCHAR(50) NOT NULL
);
ALTER TABLE employee ADD password VARCHAR(20);

CREATE TABLE pizza_order (
  num BIGSERIAL PRIMARY KEY NOT NULL,
  receipt_num BIGINT NOT NULL,
  datetime TIMESTAMP NOT NULL DEFAULT NOW(),
  pizza VARCHAR(20) NOT NULL REFERENCES pizza(name),
  cost DECIMAL NOT NULL,
  customer_name VARCHAR(50) NOT NULL,
  customer_phone_num BIGINT NOT NULL,
  FOREIGN KEY (customer_name, customer_phone_num) REFERENCES customer (name, phone_num),
  employee VARCHAR(50) NULL DEFAULT NULL REFERENCES employee (name)
);
ALTER TABLE pizza_order ADD paid DECIMAL NULL DEFAULT NULL;
ALTER TABLE pizza_order ADD issuance_datetime TIMESTAMP NULL DEFAULT NULL;

CREATE TABLE order_extra_topping (
  order_num BIGINT NOT NULL REFERENCES pizza_order(num),
  extra_topping VARCHAR(30) NOT NULL REFERENCES extra_topping(name),
  PRIMARY KEY (order_num, extra_topping)
);




